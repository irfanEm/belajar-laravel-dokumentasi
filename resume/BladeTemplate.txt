BLADE TEMPLATE.

#Intro

File blade template menggunakan extensi '.blade.php'.
File blade template biasanya disimpan di direktori 'resource/views'
View blade bisa di return langsung dari route ataupun method controller menggunakan global helper function 'view()'.
Seperti yang sudah dijelaskan pada materi view, kita bisa mengirimkan data ke view, dengan menjadikanya sebagai argument ke dua dari global helper function view(). contoh :

    Route::get('/test', function(){
        return view('test', ['data' => 'hello test']);
    });

#Menampilkan Data

Untuk menampilkan data di blade template, kita bisa gunakan tanda double kurung kurawal ({{  }}).
Sebagai contoh, misalkan data dikirim dari Route sebagai berikut :

    Route::get('/test', function(){
        return view('test', ['data' => 'hello test']);
    });

Selanjutnya untuk menampilkanya di view test.blade.php, kita bisa lakukan berikut :

    {{ data }}

Statement echo dari blade template yaitu double kurung kuraawal ({{  }}), secara otomatis akan menjalankan function 'htmlspecialchars()' untuk mencegah serangan XSS.
Selain itu, statement echo blade template juga bisa menampilkan hasil dari function php apapun. sehingga memungkinkan kita untuk menuliskan function php apapun di dalam statement echo blade template. contoh :

    hari ini tanggal {{ date("d-m-y") }}

#Mendaftarkan Components Package Secara manual.

saat kita ingin membangun package yang memanfaatkan component blade, kita harus mendaftarkan nama class, dan tag html alias secara manual ke dalam method boot dari service provider package.
cara mendaftarkanya ada 2 macam, yaitu menggunakan method 'component('tag-alias', NamaClass::class)'. contoh

Blade::component('alert', Alert::classs);

atau menggunakan componentNamepace('Contoh\\Namespace\\Random', 'tag-alias');

contoh cara menggunakanya : <x-alert/>
kelebihan dari method componentNamespace adalah ketika didalam package terdapat lebih dari 2 namespace kita bisa menggunakan semuanya. contoh :

<x-alert::alertsatu/>
<x-alert::alertdua/>

# Merender Component.

Untuk menampilkan component, kita bisa menggunakan tag component blade di salah satu template blade.
Tag component blade, dimulai dengan string 'x-' selanjutnya diikuti dengan nama class component yang ditulis dengan format camel-case. contoh :

    <x-alert/>

jika class component berada di direktori yang lebih dalam dari direktori 'app/View/Components', kita bisa menggunakan tanda titik (.) untuk mengindikasi direktori bersarang.
sebagai contoh, misal component input berada di direktori 'app/View/Components/Forms/Input.php', kita bisa merendernya dengan menuliskanya sebagai berikut :

    <x-forms.input/>
Jika kita ingin merender component secara kondisional, kita bisa melakukanya dengan mendefinisikan method 'shouldRender()' di dalam component class kita. Jika method shouldRender mengembalikan false, maka component tidak akan dirender. contoh :

    public function shouldRender(): bool
    {
        return Str::length($this->message)>0;
    }

# Index Components

Mungkin terkadang kita memiliki / ingin mengelompokan component yang cocok kedalam sebuah grup. contoh :

    App\View\Components\Card\Card
    App\View\Components\Card\Header
    App\View\Components\Card\Footer

saat kita lihat contoh diatas, mungkin kita berpikir bahwa untuk merender component 'card' kita harus menggunakan '<x-card.card/>'.
Tapi kita tidak harus melakukan hal tersebut, didalam laravel ketika nama component sama dengan nama direktori component, maka laravel secara otomatis akan menganggap nama component sebagai akar (root) dari component tersebut. dan memungkinkan kita untuk merender component tersebut tanpa perlu mengulang namanya. contoh :

    <x-card>
        <x-card.head>...</x-card.head>
        <x-card.footer>...</x-card.footer>
    </x-card>

# Mem-passing data ke Component.

Kita bisa memberikan / mem-passing data ke component menggunakan attribut string HTML yang mana harus diawali / menggunakan prefix karakter titik dua (:).
contoh :

    <x-alert :message="$message"/>

Selanjutnya kita harus mendefinisikan semua data attribute component ke constructor class.
Semua properti public dari component akan secara otomatis tersedia (available) di view component, tanpa harus kita mengirimkanya ke view melalui method render dari component.
contoh :

    namespace App\View\Components;

    use Illuminate\View\Component;
    use Illuminate\View\View;

    class Alert extends Component {

        public function __construct(
            public string $type,
            public string $message
        ) {}

        public function render()
        {
            return view('components.alert');
        }
    }

Selanjutnya jika kita ingin menampilkan konten dari variable public component, kita bisa meng-echokan nama variabel tersebut.
contoh :

    <div class"alert alert-{{ $type }}" >
        {{ $message }}
    </div>

# Case
Saat menuliskan argument constructor component, kita harus menggunakan format CamelCase, sedangkan disaat kita menuliskan nama argument didalam attribut HTML, gunakan format kebab-case.
contoh :

    public function __construct(stirng $alertType) {}

kemudian disaat kita ingin menggunakanya di attribut HTML, kita bisa menuliskanya sbb :

    <x-alert alert-type="danger" />

#Short Attribute Syntax
Saat kita mem-passing attribute ke component, kita juga bisa menggunakan syntax short attribute.
Ini lebih nyaman digunakan, karena nama attribute akan mencocokan nama variabel yang sesuai dengan mereka.
contoh :

    // ini menggunakan syntax short attribute
    <x-profile :$userId :$name />

    // syntax diatas, itu sama dengan syntax berikut :
    <x-profile :user-id = "$userId" :name = "$name" />

#Escaping Attribute Render
Beberapa Framework Javascript juga menggunakan awalan tanda titik dua (:).
Jika kita ingin memberitahu blade, bahwa attribute tersebut bukan merupakan expresion PHP, kita bisa menggunakan awalan double titik dua (::).
contoh :

    <x-button ::class={ danger: isDeleting } />
        Submit
    </x-button>

    kode diatas akan dirender menjadi :

    <button :class="{ danger: isDeleting }">
        Submit
    </button>

# Component method
Selain variabel public yang tersedia di template component, semua method public juga dapat dipanggil di template component.
contoh :

    misalkan kita punya method berikut :

    public function isSelected(string $option): bool
    {
        return $option === $this->selected;
    }

selanjutnya kita bisa memanggil method tersebut dari template component, dengan memanggilnya sebagai variabel dengan nama yang sesuai dengan nama method.
contoh :

    <option {{ $isSelected($value) ? 'selected' : '' }} value="{{ $value }}">
        {{ $label }}
    </option>

#Accessing Attributes & Slots Within Component class
Blade component memungkinkan kita untuk mengakses nama component, attribut, dan slot dari dalam method render dari class component.
Untuk bisa mengakses data tersebut, kita harus mengembalikan closure function didalam method render.
contoh :

    public function render(): Closure
    {
        return function() {
            return "<div {{ $attributes }}>Components content</div>":
        }
    }

Method render ini juga bisa menerima data yang berisi array, dimana data ini merupakan satu satunya argument dari method ini.
Data array berisi beberapa element yang menyediakan informasi tentang component.
contoh :

    public function render(): Closure
    {
        return function($data) {
            // $data['componentName'];
            // $data['attributes'];
            // $data['slot'];

            return "<div {{ $attributes }}>Components content</div>":
        }
    }

'componentName' itu sama dengan nama tag HTML yang ada setelah tanda 'x-'. contoh componentName untuk '<x-alert class="alert-success" id="alert" />' adalah 'alert'.
'attributes' itu berisi semua attribute yang ada di tag HTML, misal dalam contoh diatas adalah : ['class=>alert-success', 'id=>alert'].
'slot' adalah sebuah object 'Illuminate\Support\HtmlString' dengan dengan content dari component slot.
function closure harus mengembalikan string, lalu jika string yang dikembalikan itu sesuai dengan view yang ada, maka view tersebut akan di render, jika tidak maka string akan dirender sebagai blade view inline.

NOTE : Jangan pernah mengembed data element yang ada di $data secara langsung ke string yang di return oleh method render, karena hal tersebut dapat memungkinkan eksekusi kode jarak jauh melalui content attribut yang berbahaya.

# Dependencies Tambahan.
- Jika component kita membutuhkan dependencies dari service container, kita bisa me-list dependencies yang dibutuhkan sebelum setiap data attribute dari component kita.nantinya secara otomatis dependencies akan disuntikan ke container.
contoh :

    public function __construct(
        public AlertCreator $alertCreator;
        public string $type;
        public string $message;
    ){}

# Menyembunyikan Methods / Properties.
- Jika kita ingin mencegah method / properti public kita terekspos sebagai variabel di template component kita, kita bisa menambahkanya ke properti array $expect dari component kita.
contoh :

    class Alert extends Components
    {
        // masukan properti / method yang ingin kita hide
        protected $expect = ['type'];

        public function __construct(
            public string $type;
        ){}
    }

# Attribute Components
 - Semua attribute HTML yang tidak didefinisikan di constructor dari class component, akan tersedia di 'attribute bag' dari component. Dan bisa diakses melalui variabel $attributes. Semua attribute dapat dirender didalam component dengan meng-echo variabel ini.
 contoh :

    // component alert
    <x-alert :message="$message" type="error" class="mt-4" />

    // blade component
    <div {{ $attributes }} >
        <-- content compponent -->
    </div>

# Attributes Default / Merge
- Ketika kita mungkin ingin menentukan nilai default, atau menggabungkan beberapa nilai ke attributes component, kita bisa gunakan method 'merge()' dari attributes bag. Method ini sangat berguna khususnya untuk menetapkan seperangkat class CSS default yang harus selalu di terapkan ke sebuah component.
contoh :

    // misalkan kita punya component blade berikut :
    <div {{ $attributes->merge(['class' => 'alert alert-'. $type]) }} >
        {{ $message }}
    </div>

    // Jika kita asumsikan component di gunakan sebagai berikut :
    <x-alert type="error" :message="$messages" class="mb-4" />

    // maka hasil render nya adalah sebagai berikut :
    <div class="alert alert-error mb-4" >
        <!--- Content dari $message ---!>
    </div>

# Merge Class secara Kondisional.
- Ketika mungkin kita ingin menggabungkan(merge) class berdasarkan kondisi tertentu, 'true' misalnya. Kita bisa gunakan method 'class()' dari attributes bags.
- Method ini menerima sebuah argument berupa data array, yang mana key-nya berupa list class yang ingin di merge, dan value-nya adalah expresion boolean(true/false).
- Jika array key, berupa numeric, maka dia akan selalu disertakan ketika class di render.
- contoh :

    <div {{ $attributes->class(['p-4', 'bg-red' => $hasErrors]) }} >
        {{ $messages }}
    </div>

- Selanjutnya, jika kita ingin me-merge(menggabungkan) attribute lain ke component, kita bisa merangkaikan method 'merge()' ke method 'class()'.
- contoh :

    <div {{ $attributes->class(['p-4', 'bg-red' => $hasErrors])->merge(['type' => 'button']) }} >
        {{ $messages }}
    </div>

- Jika kita ingin meng-compile element HTML secara kondisional yang tidak menerima attributes 'merge', kita bisa menggunakan directive '@class'.
